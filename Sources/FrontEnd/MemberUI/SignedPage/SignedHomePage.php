
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
        <link rel="stylesheet" href="SignedHomePage.css" />
        <title>Kinh doanh rượu</title>
    </head>

    <body>
        <?php require_once "../Header/SignedHeader.php" ?>

        <section id="poster" style="width: 100%; height: auto; padding: 0 5%;">
            <img src="../GuestPage/img/poster.jpg" style="max-width: 100%;">
        </section>

        
        <section>
            <div class="center-text">
                <div class="title_section">
                    <div class="bar"></div>
                    <h2 class="center-text-share">SẢN PHẨM NỔI BẬT</h2>
                </div>
            </div>
            <div class="icon-bottom-title">
                <img src="#" alt="" />
            </div>
        </section>



        <section id="product">
            <div class="products">
                <!-- Hiển thị vài sản phẩm nổi bật -->
            </div>

        </section>
        <div style="display: flex; align-items: center; justify-content: center;">
            <button id="btn-load-more">Xem thêm các sản phẩm</button>
        </div>

        <!-- Tin tức -->
        <section class="Home-titleSection">
            <div class="Home-lineSection-2"></div>
                <h2 class="Home-txtTitle">TIN TỨC</h2>
            <div class="Home-lineSection-2"></div>
        </section>

        <section class="Home-grid-container">
            <div class="Home-grid-item">
                <img class="Home-gird-item-img" src="../GuestPage/img/uongRuouVangMoiNgay.jpg" alt=""/>
                <div class="home-title-context">
                <h1 class="Home-title-heading">Uống rượu vang mỗi ngày, nên hay không?</h1>
                <p class="Home-context">
                    Nếu bạn thật sự rất thích rượu vang, thì bạn chắc hẳn sẽ có xu hướng mất kiểm soát bản thân. Điều này thì cũng dễ hiểu vì khi bạn thực sự thích một điều gì đó thì việc dừng lại cũng giống như cực hình.
                </p>
                </div>
            </div>
            <div class="Home-grid-item">
                <img class="Home-gird-item-img" src="../GuestPage/img/whisky.jpg" alt=""/>
                <div class="home-title-context">
                <h1 class="Home-title-heading">Sự thật về sự khác biệt giữa Single Malt Whisky và Blended Scotch Whisky</h1>
                <p class="Home-context">
                    Về quy trình sản xuất, Whisky có thể được phân thành hai loại. Đó chính là single malt và blended whisky. Dưới đây là cách phân biệt single malt whisky với blended whisky.
                </p>
                </div>
            </div>
            <div class="Home-grid-item">
                <img class="Home-gird-item-img" src="../GuestPage/img/chivas.jpg" alt=""/>
                <div class="home-title-context">
                <h1 class="Home-title-heading">Giá rượu Chivas 12, 18, 21, 25, 38 mới nhất tại thị thường Việt Nam 2024</h1>
                <p class="Home-context">
                    Chivas là một trong những thương hiệu rượu Whisky nổi tiếng mà những người sành rượu ai cũng biết. Nhãn hiệu này ngày càng phát triển với những dòng rượu đình đám như Chivas 12, Chivas 18, Chivas 21 Royal Salute, Chivas 25 và Chivas 38.
                </p>
                </div>
            </div>
            <div class="Home-grid-item">
                <img class="Home-gird-item-img" src="../GuestPage/img/ballantines.jpg" alt=""/>
                <div class="home-title-context">
                <h1 class="Home-title-heading">Giá rượu Ballantine's Finest, 12, 15, 17, 19, 21, 30, 40 mới nhất thị trường 2023</h1>
                <p class="Home-context">
                    Giá rượu thương hiệu Ballantine’s 12, 15, 17, 19, 21, 30, 40... mới nhất thị trường hiện nay và luôn là top rượu bán chạy hàng đầu tại Việt Nam.
                </p>
                </div>
            </div>
            <div class="Home-grid-item">
                <img class="Home-gird-item-img" src="../GuestPage/img/jagermiester.jpg" alt=""/>
                <div class="home-title-context">
                <h1 class="Home-title-heading">Cách nhận biết rượu Jagermeister thật giả</h1>
                <p class="Home-context">
                    Một trong những loại rượu mùi nhập khẩu số một tại Mỹ và top đầu trên thế giới. Hãy khám phá rượu Jagermeister là gì và cách phân biệt thật giả mới nhất hiện nay trong bài viết dưới đây.
                </p>
                </div>
            </div>
            <div class="Home-grid-item">
                <img class="Home-gird-item-img" src="../GuestPage/img/Bordeaux.jpg" alt=""/>
                <div class="home-title-context">
                <h1 class="Home-title-heading">Top 10 chai rượu vang Pháp nổi tiếng thế giới đã có mặt tại thị trường Việt Nam</h1>
                <p class="Home-context">
                    Cùng Winemart điểm qua Top 10 chai rượu vang Pháp nổi tiếng thế giới đã có mặt tại thị trường Việt Nam mà có thể bạn chưa biết.
                </p>
                </div>
            </div>
        </section>

        <!-- Dịch vụ -->
        <section class="Home-service">
        <div class="Home-service-child">
            <div><img class="Home-service-img" src="../GuestPage/img/service-1.jpg" alt=""/></div>
            <h2 class="home-heading-sercive">Giao Hàng nhanh</h2>
            <p class="home-txt-sercive">
            Winemart sẽ luôn cố gắng giao hàng nhanh nhất có thể
            </p>
        </div>
        <div class="Home-service-child">
            <div><img class="Home-service-img" src="../GuestPage/img/service2.jpg" alt=""/></div>
            <h2 class="home-heading-sercive">Hỗ trợ khách hàng</h2>
            <p class="home-txt-sercive">
            Chăm sóc, tư vấn và hỗ trợ khách hàng gọi ngay <br>
            1900.636.035
            </p>
        </div>
        <div class="Home-service-child">
            <div><img class="Home-service-img" src="../GuestPage/img/service3.jpg" alt=""/></div>
            <h2 class="home-heading-sercive">Thanh toán thuận tiện</h2>
            <p class="home-txt-sercive">
            Winemart hỗ trợ thanh toán
            <br />
            COD "Trong nội thành TP.HCM" và chuyển khoản
            </p>
        </div>
        </section>

        <?php require_once "../Footer/Footer.php" ?>

    </body>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>

        function formatCurrency(number) {
            // Chuyển đổi số thành chuỗi và đảm bảo nó là số nguyên
            number = parseInt(number);

            // Sử dụng hàm toLocaleString() để định dạng số tiền
            // và thêm đơn vị tiền tệ "đ" vào cuối chuỗi
            return number.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' });
        }

        
        // Lắng nghe sự kiện click vào Poster
        document
            .getElementById("poster")
            .addEventListener("click", function () {
                window.location.href = 'SignedProduct.php';
        });

        


        // Lắng nghe sự kiện click vào Xem thêm
        document.getElementById("btn-load-more").addEventListener("click", function () {
                window.location.href = 'SignedProduct.php';
        });


        // Gọi hàm getAllLoaiSanPham khi trang được tải
        $(document).ready(function() {
            getAllSanPham();
        });


        // Hàm getAllSanPham -> Load sản phẩm nổi bật
        function getAllSanPham() {
            // Gọi API để lấy dữ liệu sản phẩm
            $.ajax({
                url: "../../../BackEnd/ManagerBE/SanPhamBE.php",
                method: "GET",
                dataType: "json",

                data: {
                    isDemoHome: true
                },
                success: function(response) {
                    var productContainer = $('#product .products');
                    if (response.data && response.data.length > 0) {
                        // Tạo biến lưu trữ nội dung HTML mới
                        var htmlContent = '';
                        // Biến đếm số lượng sản phẩm
                        var count = 0;
                        // Duyệt qua từng sản phẩm và tạo nội dung HTML tương ứng
                        $.each(response.data, function(index, product) {
                            // Kiểm tra nếu số lượng sản phẩm đã đạt tới 4 thì dừng lại
                            if (count >= 3) {
                                return false;
                            }
                            var imageSrc = product.AnhMinhHoa;
                            htmlContent += `
                                <div class="row">
                                        <a href="SignedProductDetail.php?maSanPham=${product.MaSanPham}&soLuong=${product.SoLuongConLai}" onclick="detail(${product.MaSanPham})">
                                        <img src="${imageSrc}" alt="" style=" height: 300px;" onclick="detail(${product.MaSanPham})">
                                        <div class="product-card-content">
                                            <div class="price">
                                                <h4 class="name-product">${product.TenSanPham}</h4>
                                                <p class="price-tea">${formatCurrency(product.Gia)}</p>
                                            </div>
                                            <div class="buy-btn-container" onclick="detail(${product.MaSanPham})>
                                                <a href="">Xem chi tiết</a>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            `;
                            // Tăng biến đếm lên 1 sau mỗi sản phẩm được thêm vào
                            count++;
                        });
                        // Thay đổi nội dung HTML của phần tử sản phẩm
                        productContainer.html(htmlContent);
                    } else {
                        // Hiển thị thông báo khi không có sản phẩm
                        productContainer.html('<p>Không có sản phẩm nào.</p>');
                    }
                },
                error: function(xhr, status, error) {
                    console.error("Error:", error);
                }
            });
        }

        
        //Sự kiện xem chi tiết sản phẩm
        function detail(maSanPham){
            const form = document.getElementById(`productForm_${maSanPham}`);
            
            form.submit();
        }
    

        


    </script>
</html>
